# botchallenge-epam-2020-Zombie

Это именно тот, что использовался в игре. Сейчас попробую кратко описать %) :

1. Основной метод поиска базируется на A*, но я его модифицировал под отрицательные веса (не говорите, что это невозможно %). Часть нужных вариантов он таки пропускает, но в целом неплохо.

2. Поиск происходил "в кубе" - я брал карту и строил ее естимейт во времени (глубина регулируется константами, в игре было 7 - достаточно, так как пушки обычно перезаряжались за 7 тиков). На последнем слое QStar (я так его обозвал) вырождался в обычный BFS. Идея куба взята с победителя бомбермена %) - я сразу начал именно этот вариант писать тут.

3. Дальше происходили всякие естимейты опасностей и профитов, получалась некая карта типа поля, которая использовалась в QStar как стоимость перехода с ячейки в ячейку.

4. Именно поэтому я очень неплохо уворачиался оты выстрелов за малым исключением (ловили на подлете)

5. Дополнительно было ручкамти прописан ынекоторые спец.ситуации - как то летящий рядом игрок (грех не бахнуть ему в лоб - он же в полете не может ничего сделать в ответ %).

6. В режиме берсерка доп.правила по принципу - если выстрел дает немедленный профит  - стреляем

7. Еще специально для берсерка сделал attackmap - это карта , в которой указываются точки интереса (я их ставил автоматом вокрул порталов, потому бот там и ошивался)

8. Трекинг - я взял свой алгоритм с бомбермена, но оформил уже в виде класса - надеюсь, не последний бот-челлендж %)

## Чего не было доделано:

- автоматически политики, по сути во время игры подправлял стоимость профита золота от нуля (тогда бот чешет на выход) до большого отрицательного значения (бот занят в основном сбором золота). Была идея этот параметр менять в зависимости от набранного золота (но тут 100% не скажешь сколько возьмешь, так как игроки могли заходить в одну клетку и непонятно кто из них взял) + расстояние до портала + наличия игроков рядом. Хотя вру - там есть в некоторых случаях выход берсерка в нормальный режим и переход из авто-режиме в псевдо-берсерк (остороженый берсерк). То есть политики (смотрите файл Cube) идут по принципу - первая, которая дает положительный результ (то есть есть возможный профит и низкая вероятность сметри) - та и применяется

- Основные политики - поиск выхода, исследование карты, атака, поиск золота/профита, просто выжить (см. get_best_path).

- Если надолго застрял - сеппука (но сегодня этого практически не случалось)

Клиент почти полностью написан с нуля (оставил только сетевую часть с исходного), многие идеи взял просто с бомбермена (вернее бомбермен мне позволил не тратить время на то, что я был уверен уже не даст выхлопа) 

Чтобы запустить выложенный - переименуйте config.example в config.py, пропишите там свой урл игрока (REMOTE_URL)

Ну и не пинайте за не питоник-way питон - я его пользую чисто для фана, и для скриптинга, потому там есть скажем так вещи, что реальным питонистам будут колоть глаза

ПС: почему питон ? На нем очень быстро проверять идеи, на том же С/С++ я бы просто не успел. Но потеря скорости. Но я вписался в 100мс %) (при 200мс и выше начинались дропы).

Ночной кошмар для моего бота - заблокированные проходы :slightly_smiling_face: (особенно ящиками)

Иногда кажется, что им управляют извне %) - типа стоит-стоит или зациклился и потом вдруг пошел. Это в частности потому, что когда какая-то часть карты становится невидимой, я на ней стираю передвижные объекты, но не сразу, а через некоторое время. Поэтому если по факту ящиками заблокировали все три портала, то пока мы подойдем к одному, ко второму, к третьему- у них получается разное время истекания и бот начинает бродить туда обратно по карте (в общем получался мониторинг - а вдруг кто-то где-то открыл проход %))

Ну и если проход в одну клетку и в нем стоит кто-то - то для моего бота это помеха, осторожный шибко. Наверное надо было сделать агресивнее, но на прогонах за последнюю неделю именно осторожный набирал больше очков

А, первый удачный бот (версия номер 13) у меня была чисто пацифист - бегал на максимальной скорости и собирал золото, не стреляя. И мне пришлось сильно постараться, чтобы мой стреляющий бот переплюнул его (так как выстрел у меня с задержкой в ход - не знал, что можно стрелять и прыгать %). А задержка - значит меньше собранного золота в единицу времени. (edited) 
